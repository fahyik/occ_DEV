{% extends "occ_survey/base.html" %}

{% load staticfiles %}

{% block head_block %}
{% endblock %}

{% block body_block %}

<div class="container">
	
	<div class="row">
		<div class="col-sm-12">
		<div class="index-section">
			<h3>Uncompleted Tasks:</h3>
			<ul>
				{% if user_profile.profile_isDone == 0 %}
				<li><a href="{% url 'occ_survey:survey' 'profile' %}">Complete Profile Questionnaire</a></li>
				{% endif %}
			</ul>
		</div>
		</div>
	</div>
	
	{% if user.username == "admin" or  user.username == "zoltan" %}
	<div class="row">
		<div class="col-sm-9">
		<div class="index-section">
			<h3>Energy Consumption: <span><button id="db_toggle_charts" class="btn btn-default btn-sm">Show</button></span></h3>
			<div id="charts" class="hidden">
			<h4>Room {{ user_profile.room}} | Energy Consumption of Lighting (in hours) for the past week:</h4>
			<canvas id="myChart" style="height: 250px; width: 100%"></canvas>
			</div>
		</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-sm-12">
		<div class="index-section" style="min-height: 400px;">
			<h4>My office controls:</h4>
		</div>
		</div>
	</div>
	{% endif %}

	

</div>

{% endblock %}

{% block script_block %}
<script>
	// url called in ajax_get_script in dashboard.js 
	var url_charts = "{% static 'occ_survey/js/charts.js' %}";
	// data for charts, ajax get-json from backend
	var data_db;
	$.ajax({
	async: true,
	url: "{% url 'occ_survey:chart_cons' %}",
	type: 'GET',
	dataType: 'json', // added data type
	success: function(res) {
		data_db = res;
	}
});
</script>
<!-- Chart.js scripts -->
<script src="{% static 'occ_survey/js/Chart.js' %}"></script>
<script src="{% static 'occ_survey/js/Chart.Scatter.js' %}"></script>
<!-- js for dashboard.html page -->
<script src="{% static 'occ_survey/js/dashboard.js' %}"></script>
{% endblock %}